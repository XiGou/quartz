<!DOCTYPE html>
<html><head><title>Open Source Project Review: Convert command line to Web App with Wooey</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Open Source Project Review: Convert command line to Web App with Wooey"/><meta property="og:description" content="There is a problem always annoying the software developer: How to deliver your software to your user? Recently, I wrote a tool for internal use, It is implemented in Python , and packaged as a command line program, I think it is esay enough for me to use, but the reality is cruel, not all the target user have technical background, the feedback is they all think it is hard to use it."/><meta property="og:image" content="https://quartz.19960312.xyz/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../static/icon.png"/><meta name="description" content="There is a problem always annoying the software developer: How to deliver your software to your user? Recently, I wrote a tool for internal use, It is implemented in Python , and packaged as a command line program, I think it is esay enough for me to use, but the reality is cruel, not all the target user have technical background, the feedback is they all think it is hard to use it."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=Roboto Mono&amp;family=Noto Serif SC:wght@400;700&amp;family=Noto Serif SC:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="Blog/2022-11-19-convert-cmd-web-wooey"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href="..">üòÑ Joker's Digital Garden</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="recent-notes desktop-only"><h3>Recent</h3><ul class="recent-ul"><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../Travels/Travels" class="internal">1970~2023</a></h3></div><p class="meta">Feb 05, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../Readings/Videos/Videos" class="internal">Videos</a></h3></div><p class="meta">Feb 05, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../Readings/Papers/Papers" class="internal">Papers</a></h3></div><p class="meta">Feb 05, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../Readings/Music/Lizhi" class="internal">Lizhi</a></h3></div><p class="meta">Feb 05, 2024</p><ul class="tags"></ul></div></li><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../Readings/Movies/Movies-&amp;-TV" class="internal">Movies &amp; TV</a></h3></div><p class="meta">Feb 05, 2024</p><ul class="tags"></ul></div></li></ul><p><a href="../tags">See 86 more ‚Üí</a></p></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../">Home</a><p> ‚ùØ </p></div><div class="breadcrumb-element"><a href="../Blog/">Blog</a><p> ‚ùØ </p></div><div class="breadcrumb-element"><a href>Open Source Project Review: Convert command line to Web App with Wooey</a></div></nav><h1 class="article-title">Open Source Project Review: Convert command line to Web App with Wooey</h1><p class="content-meta">Nov 19, 2022, 6 min read</p><ul class="tags"><li><a href="../tags/Software-Practice" class="internal tag-link">#Software-Practice</a></li></ul><div class="recent-notes mobile-only"><h3>Recent</h3><ul class="recent-ul"><li class="recent-li"><div class="section"><div class="desc"><h3><a href="../Travels/Travels" class="internal">1970~2023</a></h3></div><p class="meta">Feb 05, 2024</p><ul class="tags"></ul></div></li></ul><p><a href="../tags">See 90 more ‚Üí</a></p></div></div></div><article class="popover-hint"><p>There is a problem always annoying the software developer: How to deliver your software to your user?</p>
<p>Recently, I wrote a tool for internal use,  It is implemented in Python , and packaged as a command line program, I think it is esay enough for me to use, but the reality is cruel,  not all the target user have technical background, the feedback is they all think it is hard to use it. when they need to use it, they would definitely asking me to support them again and again,  so the software I developed became a nightmare of mine.</p>


<p>I have to think about what is best way to deliver software to end user, if you are working om a big project you don‚Äôt need to think about this, because their softwares are complicated and have a very mature deploy or delivery pipeline, you just working on a narrow stage of this  pipeline. But I have to, now.</p>
<h2 id="what-makes-command-line-tool-hard-to-use">What Makes Command Line Tool Hard to Use?<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#what-makes-command-line-tool-hard-to-use" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="complicated-dependencies">Complicated Dependencies<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#complicated-dependencies" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Some colleagues cannot even install it, because the user enviroment are different, and my tool depends on a Python3.7 and some Pypi packages, cause Python3.7 is not the default python version for most linux distributions, so the user need to install it by themselves, it is a hard task for user without a technical background.
This issue is easy to resolve, docker is a powerful weapon deal with the dependencies, I packaged my tool into a docker image with all the dependencies in, then I just need to told the user how to download the image and run it.</p>
<h3 id="has-no-graphical-user-interface">Has No Graphical User Interface<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#has-no-graphical-user-interface" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>It‚Äôs already 21st century now, Most people living in this century don‚Äôt have a chance to use the command line. Many software deliver with a cross platform and user-friendly GUI, Software as-a Service is the main-stream delivery pattern, you don‚Äôt even need to install a software, you can just open a Web page and start to use it.  So the best choice is to provide a GUI with my command line tool, It would be better to provide my Command Line as-a Service.</p>
<h2 id="how-to-convert-command-line-to-web-app">How to Convert Command Line to Web App<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#how-to-convert-command-line-to-web-app" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>So what we need to do now is clear: Convert command line to Web App.</p>
<p>But how to do it? As experienced software engineer, you may open your flowchart drawing software and the start to design the architecture of a backend and front-end separated software architecture, you should choose a database: relational or documentary oriented, you must choose a backend programming language: Node.js or Python, you need to write a restful API by youself, finally you also need to implement a GUI As a Single-paged WebApp or Desktop GUI.</p>
<p>It sounds like a struggling work, and I refuse to do this, I need to find an easy way to achieve this goal: convert our command line to a web application, and the user can just click to set the arguments of the command line and the click submit button to run the tool. The most important thing is we don‚Äôt need to write too much code.</p>
<h2 id="wooey-a-script-server-matches-all-our-needs">Wooey: A Script Server Matches All Our Needs<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#wooey-a-script-server-matches-all-our-needs" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>I searched on the internet and tried many projects. Finally I found it, it‚Äôs Wooey.</p>
<p><a href="https://github.com/wooey/wooey" class="external">https://github.com/wooey/wooey<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>The command line tool is something like this, you can run it through the shell with specified arguments, and you can press Enter to execute it, the program will run for sometime and generate some file or print something to the console.</p>
<p>Firstly we package it into a docker image, just makes the command line can run anywhere, and the user don‚Äôt need to worry about the dependencies</p>
<p>The Wooey introduced itself as ‚Äúa simple web interface to run command line Python scripts‚Äù, through Python we have the ability to run any command line program which installed inside operating system, if we write a script as wrapper for our command line and upload it to the wooey server, it will automatically transform our script to a Web App, that is what we all need!</p>
<h2 id="step-by-step-solution">Step By Step Solution<a aria-hidden="true" tabindex="-1" data-no-popover="true" href="#step-by-step-solution" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>To keep things simple, assume your command line tool is equivalent to shell commands below:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-dark github-light"><code data-language="bash" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">sleep</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 10</span></span>
<span data-line><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">echo</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> $text</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">touch</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> $file</span></span></code></pre></figure>
<p>the arguments are text and file, this ‚Äúcommand line‚Äù will sleep 10 second, then echo the text and create an empty file.</p>
<p>We write a simple script to wrap it as a Python command line program:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="python" data-theme="github-dark github-light"><code data-language="python" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;"># file name is wooey_entry_cmd.py</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> argparse</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> subprocess</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> sys</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">parser </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> argparse.ArgumentParser(</span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">description</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;my cmd tool.&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">parser.add_argument(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;--text&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">help</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;anything&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">type</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">default</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;nothing&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">parser.add_argument(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;--output&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">help</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;file name&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">type</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">str</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#FFAB70;--shiki-light:#E36209;">default</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;output&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">)</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">def</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> main</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">():</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    args </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> parser.parse_args()</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    subprocess.run([</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;sleep&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;10&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">])</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    subprocess.run([</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;echo&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, args.text])</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    subprocess.run([</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&quot;touch&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">, args.output])</span></span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">    return</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> 0</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">if</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> __name__</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> ==</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &quot;__main__&quot;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">:</span></span>
<span data-line><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    sys.exit(main())</span></span></code></pre></figure>
<p>Then we write the Dockerfile to package our command line tool and the wooey project toghter as a docker image, and convert our Python script to a Web App through the wooey provided tool.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="Dockerfile" data-theme="github-dark github-light"><code data-language="Dockerfile" data-theme="github-dark github-light" style="display:grid;"><span data-line><span>FROM python:3.7 as cmd</span></span>
<span data-line><span># install you command tool here</span></span>
<span data-line><span># we use linux pre installed command, skip this</span></span>
<span data-line> </span>
<span data-line><span>FROM cmd as wooey_ui</span></span>
<span data-line><span>WORKDIR /cmd2web_wooey</span></span>
<span data-line><span>RUN pip3.7 install wooey \</span></span>
<span data-line><span>    &amp;&amp; wooify -p cmd2web_wooey</span></span>
<span data-line><span>COPY ./wooey_entry_cmd.py ./cmd2web_wooey/wooey_entry_cmd.py</span></span>
<span data-line><span>COPY ./start_wooey.sh ./cmd2web_wooey/start_wooey.sh</span></span>
<span data-line><span>RUN cd cmd2web_wooey \</span></span>
<span data-line><span>    &amp;&amp; sed -i &quot;s/ALLOWED_HOSTS = \[\]/ALLOWED_HOSTS = \[\'\*\'\]/&quot; ./cmd2web_wooey/settings/django_settings.py \</span></span>
<span data-line><span>    &amp;&amp; python3.7 manage.py addscript ./wooey_entry_cmd.py</span></span>
<span data-line><span>WORKDIR /cmd2web_wooey/cmd2web_wooey</span></span>
<span data-line><span>ENTRYPOINT ./start_wooey.sh</span></span>
<span data-line><span># port 8000 listening inside container</span></span></code></pre></figure>
<p>In the Dockerfile, we specified the entrypoint as ./start_wooey.sh, and it is used to start the wooey project, it is just copied from the wooey document. The content of it is below:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-dark github-light"><code data-language="bash" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">#! /bin/bash</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">nohup</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> celery -A cmd2web_wooey worker -c </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> --beat -l info </span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">&amp;</span></span>
<span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">python3.7</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> manage.py runserver </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">0.0</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">.0.0:8000</span></span></code></pre></figure>
<p>I must point out that I run celery inside the same docker container with the wooey server, and I changed the setting of Django project to accept any host, these are all bad practices and not safe at all. Considering my command line tool is for internal use, I don‚Äôt care about security issues.</p>
<p>The docker image building command is:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-dark github-light"><code data-language="bash" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">docker</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> build -f Dockerfile --target wooey_ui -t cmd2web_wooey .</span></span></code></pre></figure>
<p>That‚Äôs all we need to do, we now have a docker image provide our Command Line as-a Service. We can run a container from this image as a daemon server through command bellow:</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="bash" data-theme="github-dark github-light"><code data-language="bash" data-theme="github-dark github-light" style="display:grid;"><span data-line><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">docker</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> run -d -p </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">8000</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">:8000 cmd2web_wooey:latest</span></span></code></pre></figure>
<p>Now we can assess our Command Line WebUI in browser through <a href="http://IP:8000" class="external">http://IP:8000<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p><img src="../images/JlRaGqx.png" width="auto" height="auto" alt/></p>
<p>Click the ‚Äúwooey_entry_cmd‚Äù script, that is the name of our python command line script, then set the arguments through the WebUI, click ‚Äúsubmit‚Äù to run the command.</p>
<p><img src="../images/OiGSCKa.png" width="auto" height="auto" alt/></p>
<p>Wait a moment, and we can get the console output and the generated empty file from the result.</p>
<p><img src="../images/ykgGckZ.png" width="auto" height="auto" alt/></p>
<p>code of this post are published on:</p>
<p><a href="https://github.com/XiGou/cmd2web_wooey" class="external">https://github.com/XiGou/cmd2web_wooey<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>Refs:</p>
<ol>
<li><a href="https://wooey.readthedocs.io/en/latest/running_wooey.html" class="external">https://wooey.readthedocs.io/en/latest/running_wooey.html<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
<li><a href="https://github.com/adamkewley/jobson" class="external">https://github.com/adamkewley/jobson<svg class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ol></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[]}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#what-makes-command-line-tool-hard-to-use" data-for="what-makes-command-line-tool-hard-to-use">What Makes Command Line Tool Hard to Use?</a></li><li class="depth-1"><a href="#complicated-dependencies" data-for="complicated-dependencies">Complicated Dependencies</a></li><li class="depth-1"><a href="#has-no-graphical-user-interface" data-for="has-no-graphical-user-interface">Has No Graphical User Interface</a></li><li class="depth-0"><a href="#how-to-convert-command-line-to-web-app" data-for="how-to-convert-command-line-to-web-app">How to Convert Command Line to Web App</a></li><li class="depth-0"><a href="#wooey-a-script-server-matches-all-our-needs" data-for="wooey-a-script-server-matches-all-our-needs">Wooey: A Script Server Matches All Our Needs</a></li><li class="depth-0"><a href="#step-by-step-solution" data-for="step-by-step-solution">Step By Step Solution</a></li></ul></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.1.6</a>, ¬© 2024</p><ul><li><a href="https://github.com/XiGou">GitHub</a></li><li><a href="https://linkedin.com/in/xigou">Linkedin</a></li><li><a href="https://stackoverflow.com/users/10871150/xi-gou">StackOverflow</a></li><li><a href="mailto:gouxivae@gmail.com">Email</a></li></ul></footer></div></body><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">function o(){let e=this.parentElement;e.classList.toggle("is-collapsed");let l=e.classList.contains("is-collapsed")?this.scrollHeight:e.scrollHeight;e.style.maxHeight=l+"px";let c=e,t=e.parentElement;for(;t;){if(!t.classList.contains("callout"))return;let n=t.classList.contains("is-collapsed")?t.scrollHeight:t.scrollHeight+c.scrollHeight;t.style.maxHeight=n+"px",c=t,t=t.parentElement}}function i(){let e=document.getElementsByClassName("callout is-collapsible");for(let s of e){let l=s.firstElementChild;if(l){l.removeEventListener("click",o),l.addEventListener("click",o);let t=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=t+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://www.googletagmanager.com/gtag/js?id=G-4FDRZXCQ8S" type="application/javascript"></script><script src="../postscript.js" type="module"></script></html>